# Моделирование работы трёхантенного фазового пеленгатора <br> (Simulation of the operation of a three-antenna phase direction finder)

В репозитории представлено моделирование трёхантенного фазового пеленгатора, в основе которого
используется цифровой фазометр. Для реализации модели использовалась среда программирования MATLAB Simulink.

Работа выполнялась для изучения работы радиотехнической системы, получения навыков работы в Simulink и анализа
влияния характеристик цели на точность измерения углов азимута и возвышения (места).

Также в этом репозитории представлен пример создания моделей в Simulink с помощью скриптов, что позволяет
быстро менять в моделях число элементов, не прибегая к ручному дублированию блоков.

## Каталоги в этом репозитории

>**data**: папка, содержащая данные результатов моделирования <br>
>**demos**: папка, содержащая демонстрацию работы модели <br>
>**direction_finder**: папка, содержащая модель фазового пеленгатора <br>
>**dynamic_system**: папка, содержащая скрипты инициализации и удаления примера модели
> с изменяемым числом элементов

## Запуск

Запуск осуществляется скриптом `RunDirectionFinder`. Все задаваемые параметры модели указаны и описаны
внутри скрипта.

## Описание модели

Описание блоков идёт слева направо по ***рисунку 1***, блок **"Перемещение источника"** описан в конце.
**"Генератор сигнала"** состоит из источника синусоидального сигнала с частотой 433 МГц и
конвектора сигнала из библиотеки Simulink в библиотеку RF BlockSet,
которая предназначена для моделирования радиосигналов и радиосистем.
Сигнал с генератора подаётся на **"Излучатель"**, который представляет из себя
ненаправленную антенну с усилением в 5 дБ и импедансом в 50 Ом. Для учёта
распространения излучения в воздушной среде имеется блок **"Потери"**, определяемый коэффициентом
ослабления в 45 дБ, соответствующего расстоянию до источника излучения в 10 метров. В роли
приёмника излучения выступает **"Антенная решётка"**, состоящая из трёх антенн, расположенных в узлах
прямоугольного треугольника, пример указан на ***рисунке 2***. Для учёта фазовых задержек между антеннами
введены два блока фазового сдвига относительно опорной антенны, значение фазового сдвига которых
определяются исходя из положения источника излучения. Таким образом с антенной решётки выходит три
синусоидальных сигнала сдвинутых по фазе друг относительно друг друга. Следом размещены **"Усилители"** с
коэффициентом усиления в 14 дБ. К ним подключены **"Измерители разности фаз"**, которые реализованы по
схеме цифрового фазометра. По измеренным разностям фаз вычисляются азимут и угол возвышения в
блоке **"Вычислитель углов"**. Полученные данные выгружаются в рабочую область Matlab в
блоке **"Выгрузка результатов"**. Для имитации движения излучателя определён блок
**"Перемещение источника"**, который после пеленга цели останавливает симуляцию, смещает
излучатель в следующую точку траектории и запускает симуляцию.

Более подробное описание работы измерителя разности фаз приведено в каталоге
[`direction_finder`](C:/operator/Github/direction_finder/README.md).

<figure>
<img src="C:/operator/Github/demos/Model.png" width="1400"

***Рисунок 1 - Модель фазового пеленгатора***
</figure>

<figure>
<img src="C:/operator/Github/demos/DirFinderDiag.png" width="400"/>

***Рисунок 2 - Схематичное изображение расположения антенн и области однозначной пеленгации***
</figure>

## Результаты моделирования

На ***рисунке 3*** представлена погрешность измерения азимута цели в диапазоне
от 0° до 80° по углу возвышения и от -90° до 90° по азимуту. Диапазон от
80° до 90° не показан, т.к. идёт резкий рост погрешности, при 81° погрешность в некоторых
местах превышает 2°, а при 87° превышает 5°. На карте погрешности видна
основная ось симметрии, соответствующая азимуту в 0°, и две вторичных оси
симметрии на -45° и 45°. Но при -45° по центру структуры симметрия нарушена
вытянутыми лепестками. Помимо вытянутых лепестков, идущих от вторичных осей
симметрии, наблюдаются кольцеобразные структуры с характерным размером в 10°,
которые отчётливо видны вблизи 0°, -90° и 90° по азимуту.

<figure>
<img src="C:/operator/Github/demos/AzimuthError.png" width="800"/>

***Рисунок 3 - Карта распределения погрешности азимута в диапазоне однозначности
от 0° до 80° по углу возвышения и от -90° до 90° по азимуту***
</figure>

На ***рисунке 4*** представлена погрешность измерения угла возвышения цели
в диапазоне от 10° до 90° по углу возвышения и от -90° до 90° по азимуту.
Диапазон до 10° не показан, т.к. идёт резкий рост погрешности, при 9° погрешность
в некоторых местах превышает 2°, а при 0° превышает 6°. На карте погрешности
видна основная ось симметрии, соответствующая азимуту 0°, и вторичная,
соответствующая азимуту в 45°, но уже на -45° ось симметрии практически отсутствует.
На этой структуре также наблюдаются кольцеобразные структуры с характерным размером
в 10°.

<figure>
<img src="C:/operator/Github/demos/ElevationError.png" width="800"/>

***Рисунок 4 - Карта распределения погрешности угла возвышения в диапазоне однозначности
от 10° до 90° по углу возвышения и от -90° до 90° по азимуту***
</figure>

На ***рисунке 5*** представлена суммарная погрешность углов азимута и
возвышения в диапазоне от 10° до 80° по углу возвышения и от -90° до 90°
по азимуту, т.к. именно в пересечении этих областей погрешность не превышает 2°.
Средняя арифметическая погрешность по выбранному диапазону составляет 0,3°.
По полученному распределению погрешности видно, что оптимальная область 
пеленгации не может находится как в плоскости антенной решётки,
так и перпендикулярно ей, что обусловлено высокой разность фаз как
минимум для одной фазометрической базы при таких углах пеленгации.

<figure>
<img src="C:/operator/Github/demos/TotalError.png" width="800"/>

***Рисунок 5 - Карта распределения суммарной погрешности углов азимута и
возвышения в диапазоне однозначности от 10° до 80° по углу возвышения и
от -90° до 90° по азимуту***
</figure>


## Пример модели с изменяемым числом элементов

<figure>
<img src="C:/operator/Github/demos/SysVarElements.gif" width="700"/>
</figure>

## Замечания

В разработанной модели не удалось реализовать фильтрацию сигналов от шумов,
т.к. пр использовании встроенных блоков фильтрации из Simulink проявлялась
потеря начальной фазы, что не позволяло измерить разность фаз между сигналами.